<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>九个 Desmos 图 & 文本区布局</title>
  <style>
    :root{
      --gap:16px;
      --card-bg: #ffffff;
      --page-bg: #f4f6f8;
      --accent: #0b79d0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{
      margin:0; padding:24px; background:var(--page-bg); color:#0b1a2b;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .container{ max-width:1200px; margin:0 auto; display:grid; grid-template-columns: 1fr 360px; gap:var(--gap); align-items:start; }

    /* Left: desmos grid */
    .grid-wrap{ background:var(--card-bg); border-radius:12px; padding:18px; box-shadow:0 6px 18px rgba(10,20,40,0.06);} 
    .grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
    .cell{ background:#fbfdff; border:1px solid rgba(10,20,40,0.04); border-radius:8px; overflow:hidden; display:flex; flex-direction:column; }
    .cell iframe{ width:100%; height:220px; border:0; display:block; }
    .caption{ padding:8px 10px; font-size:13px; color:#2b3b4a; border-top:1px solid rgba(10,20,40,0.03); }

    /* Right: text editor / notes */
    .notes{ background:var(--card-bg); border-radius:12px; padding:16px; box-shadow:0 6px 18px rgba(10,20,40,0.06); height: fit-content; }
    .notes h2{ margin:0 0 8px 0; font-size:18px; }
    .notes p{ margin:0 0 12px 0; color:#334a5f; }
    .editor{ width:100%; min-height:420px; resize:vertical; border-radius:8px; padding:12px; border:1px solid rgba(10,20,40,0.06); font-size:14px; background:#fbfdff }

    /* small screens */
    @media (max-width:980px){
      .container{ grid-template-columns: 1fr; }
      .notes{ order:2; }
      .grid-wrap{ order:1; }
      .cell iframe{ height:160px; }
    }

    /* helper */
    .topbar{ display:flex; gap:8px; align-items:center; margin-bottom:10px; }
    .topbar .title{ font-weight:600; font-size:16px; }
    .btn{ background:var(--accent); color:#fff; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; font-size:13px }
    .small{ font-size:12px; color:#6b7a87 }
  </style>
</head>
<body>
  <div class="container">
    <section class="grid-wrap">
      <div class="topbar">
        <div class="title">Desmos 图（3×3）</div>
        <div class="small">替换下面每个 iframe 的 <code>data-id</code> 或直接替换 <code>src</code></div>
      </div>

      <div class="grid" id="desmosGrid">
        <!-- 9 个单元格，替换 data-id 值为你的 Desmos 图表 ID（例如：abcd1234）或直接修改 src -->
        <div class="cell">
          <iframe data-id="DESMOS_ID_1" src="https://www.desmos.com/calculator/DESMOS_ID_1?embed" allowfullscreen></iframe>
          <div class="caption">图 1 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_2" src="https://www.desmos.com/calculator/DESMOS_ID_2?embed" allowfullscreen></iframe>
          <div class="caption">图 2 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_3" src="https://www.desmos.com/calculator/DESMOS_ID_3?embed" allowfullscreen></iframe>
          <div class="caption">图 3 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_4" src="https://www.desmos.com/calculator/DESMOS_ID_4?embed" allowfullscreen></iframe>
          <div class="caption">图 4 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_5" src="https://www.desmos.com/calculator/DESMOS_ID_5?embed" allowfullscreen></iframe>
          <div class="caption">图 5 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_6" src="https://www.desmos.com/calculator/DESMOS_ID_6?embed" allowfullscreen></iframe>
          <div class="caption">图 6 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_7" src="https://www.desmos.com/calculator/DESMOS_ID_7?embed" allowfullscreen></iframe>
          <div class="caption">图 7 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_8" src="https://www.desmos.com/calculator/DESMOS_ID_8?embed" allowfullscreen></iframe>
          <div class="caption">图 8 说明（可编辑）</div>
        </div>

        <div class="cell">
          <iframe data-id="DESMOS_ID_9" src="https://www.desmos.com/calculator/DESMOS_ID_9?embed" allowfullscreen></iframe>
          <div class="caption">图 9 说明（可编辑）</div>
        </div>

      </div>
    </section>

    <aside class="notes">
      <h2>笔记 / 解释区</h2>
      <p>在这里写下你的观察、步骤或题解。这个区域是可编辑的，你可以直接在页面中修改并保存为本地文件。</p>
      <div contenteditable="true" class="editor" id="notesEditor">在此输入你的文本。支持换行、基本文字编辑。</div>

      <div style="margin-top:12px; display:flex; gap:8px;">
        <button class="btn" id="downloadBtn">下载为 HTML</button>
        <button class="btn" id="exportNotesBtn" style="background:#2b7a4a">导出笔记为 .txt</button>
      </div>

      <p class="small" style="margin-top:10px">说明：将 <code>DESMOS_ID_1</code> 等替换成你各个 Desmos 图表的网址中最后一段 ID，或直接替换为完整的 <code>src</code> 链接（带 <code>?embed</code> 参数）以确保内嵌正常。</p>
    </aside>
  </div>

  <script>
    // 下载当前页面为单文件 HTML（便于保存）
    function downloadFile(filename, text){
      const a = document.createElement('a');
      const blob = new Blob([text], {type: 'text/html'});
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    document.getElementById('downloadBtn').addEventListener('click', ()=>{
      // 复制当前 document 的 outerHTML 并下载
      const doc = '<!doctype html>\n' + document.documentElement.outerHTML;
      downloadFile('desmos-grid.html', doc);
    });

    document.getElementById('exportNotesBtn').addEventListener('click', ()=>{
      const text = document.getElementById('notesEditor').innerText;
      const a = document.createElement('a');
      const blob = new Blob([text], {type: 'text/plain'});
      a.href = URL.createObjectURL(blob);
      a.download = 'notes.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
    });

    // 快速替换占位 ID（如果你把实际的 desmos 链接放到 data-id 中，会自动替换 src）
    document.addEventListener('DOMContentLoaded', ()=>{
      document.querySelectorAll('iframe[data-id]').forEach(iframe=>{
        const id = iframe.getAttribute('data-id').trim();
        if(id && !iframe.src.includes(id)){
          // 如果 data-id 看起来像完整链接（以 http 开头），直接使用
          if(id.startsWith('http')){
            iframe.src = id + (id.includes('?') ? '' : '?embed');
          } else {
            iframe.src = 'https://www.desmos.com/calculator/' + id + '?embed';
          }
        }
      });
    });
  </script>
</body>
</html>
